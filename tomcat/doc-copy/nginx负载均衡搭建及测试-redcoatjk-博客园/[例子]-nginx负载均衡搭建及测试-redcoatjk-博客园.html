
<!DOCTYPE html>
<html>
  <!-- OriginalSrc: https://www.cnblogs.com/redcoatjk/p/6279225.html -->
  <head>
    <meta http-equiv="Content-Type" content="text/html"; charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <title>[例子] nginx负载均衡搭建及测试 - redcoatjk - 博客园</title>
    
<link type="text/css" rel="stylesheet" href="assets/1551066199-c3c5109f48eaaa6d1602483cc44c28bb.css">

<link id="MainCss" type="text/css" rel="stylesheet" href="assets/1551066199-eb2e89e8b2e5b89861cd08640ed7e80e.css">

<link id="mobile-style" media="only screen and (max-width: 767px)" type="text/css" rel="stylesheet" href="assets/1551066199-f90c9bbe748d55407fd4b3a5f1f5cf40.css">

<link rel="stylesheet" type="text/css" href="assets/1551066199-421c2d70a3fe5a6770baf58030cefdd5.css">
<style>

</style>
<style>
@media print {#ghostery-purple-box {display:none !important}}
</style>
<style>
object,embed{                -webkit-animation-duration:.001s;-webkit-animation-name:playerInserted;                -ms-animation-duration:.001s;-ms-animation-name:playerInserted;                -o-animation-duration:.001s;-o-animation-name:playerInserted;                animation-duration:.001s;animation-name:playerInserted;}                @-webkit-keyframes playerInserted{from{opacity:0.99;}to{opacity:1;}}                @-ms-keyframes playerInserted{from{opacity:0.99;}to{opacity:1;}}                @-o-keyframes playerInserted{from{opacity:0.99;}to{opacity:1;}}                @keyframes playerInserted{from{opacity:0.99;}to{opacity:1;}}
</style>

    <style class="mx-wc-style">
      .mx-wc-main img {max-width: 100%;}
      .mx-wc-main{
        box-sizing: content-box;
        background-color: rgb(255, 255, 255) !important;
        margin: 0 auto;
        max-width: 980px;
        padding: 15px 15px 80px 15px;
      }

      .clipping-information{
        text-align: left;
        margin-top: 20px;
        background-color: #eeeeee !important;
        padding: 15px;
        border-radius: 4px;
        color: #333;
        font-size: 14px !important;
        line-height: 22px !important;
      }
      .clipping-information a {
        color: blue !important;
        text-decoration: underline !important;
      }
      .clipping-information label {
        display: inline;
        text-transform: none;
      }
      .clipping-information label > code {
        padding: 2px 8px;
        background-color: rgba(200, 200, 200, 0.7)!important;
        font-size: 14px;
      }

    </style>
  </head>
  <body style="background-color: #464646 !important; min-height: 100%; height: auto;" id="" class="">
    <div class="mx-wc-main">
      <TABLE class="Framework" cellspacing="0" cellpadding="0" width="100%" style="display: block; float: none; position: relative; top: 0; left: 0; border: 0px; width: 100%; min-width:100%; max-width: 100%; min-height: auto; max-height: 100%; height: auto; padding: 0px; margin: 0px;"><TBODY style="display: block; float: none; position: relative; top: 0; left: 0; border: 0px; width: 100%; min-width:100%; max-width: 100%; min-height: auto; max-height: 100%; height: auto; padding: 0px; margin: 0px;"><TR style="display: block; float: none; position: relative; top: 0; left: 0; border: 0px; width: 100%; min-width:100%; max-width: 100%; min-height: auto; max-height: 100%; height: auto; padding: 0px; margin: 0px;"><TD class="MainCell" style="display: block; float: none; position: relative; top: 0; left: 0; border: 0px; width: 100%; min-width:100%; max-width: 100%; min-height: auto; max-height: 100%; height: auto; padding: 0px; margin: 0px;"><DIV id="main" style="display: block; float: none; position: relative; top: 0; left: 0; border: 0px; width: 100%; min-width:100%; max-width: 100%; min-height: auto; max-height: 100%; height: auto; padding: 0px; margin: 0px;"><DIV id="post_detail" style="display: block; float: none; position: relative; top: 0; left: 0; border: 0px; width: 100%; min-width:100%; max-width: 100%; min-height: auto; max-height: 100%; height: auto; padding: 0px; margin: 0px;"><DIV class="post" style="display: block; float: none; position: relative; top: 0; left: 0; border: 0px; width: 100%; min-width:100%; max-width: 100%; min-height: auto; max-height: 100%; height: auto; padding: 0px; margin: 0px;"><div class="postbody mx-wc-selected-elem" style="float: none; position: relative; top: 0px; left: 0px; margin: 0px; flex: unset; width: 100%; max-width: 100%; box-sizing: border-box;"><div id="cnblogs_post_body" class="blogpost-body"><h2>一、Nginx + Tomcat 负载均衡测试(负载均衡+部分静态图片处理)</h2><div><br></div><div>环境说明：&nbsp;&nbsp;nginx+tomcat @ubuntu</div>ok 首先你得有一个Ubuntu或者什么其他的linux.<div>安装jdk &nbsp;tomcat &nbsp;nginx 等.. 记得配置环境变量</div><div>本测试环境的配置如下:</div><div class="wiz-table-container" style="position: relative; padding: 0px"><div class="wiz-table-body"><table style="width: 522px"><tbody><tr><td align="left" valign="middle" style="width: 521px; background-color: rgb(238, 238, 238)" class=""><div style="margin: 0px; color: rgb(0, 0, 0); font-family: Arial, Helvetica, &quot;Hiragino Sans GB&quot;, 微软雅黑, &quot;Microsoft YaHei UI&quot;, SimSun, SimHei, arial, sans-serif; font-size: 1rem; font-style: normal; font-weight: normal; text-align: start; text-indent: 0px"><span style="color: rgb(0, 0, 0); font-family: Arial, Helvetica, &quot;Hiragino Sans GB&quot;, 微软雅黑, &quot;Microsoft YaHei UI&quot;, SimSun, SimHei, arial, sans-serif; font-size: 1rem; font-style: normal; font-weight: normal; text-align: start; text-indent: 0px; display: inline !important">jdk &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span style="color: rgb(0, 0, 0); font-family: Arial, Helvetica, &quot;Hiragino Sans GB&quot;, 微软雅黑, &quot;Microsoft YaHei UI&quot;, SimSun, SimHei, arial, sans-serif; font-size: 1rem; font-style: normal; font-weight: normal; text-align: start; text-indent: 0px; display: inline !important">/usr/java/jdk1.7</span></span></div><div style="margin: 0px; color: rgb(0, 0, 0); font-family: Arial, Helvetica, &quot;Hiragino Sans GB&quot;, 微软雅黑, &quot;Microsoft YaHei UI&quot;, SimSun, SimHei, arial, sans-serif; font-size: 1rem; font-style: normal; font-weight: normal; text-align: start; text-indent: 0px"><span style="color: rgb(0, 0, 0); font-family: Arial, Helvetica, &quot;Hiragino Sans GB&quot;, 微软雅黑, &quot;Microsoft YaHei UI&quot;, SimSun, SimHei, arial, sans-serif; font-size: 1rem; font-style: normal; font-weight: normal; text-align: start; text-indent: 0px; display: inline !important"><span style="color: rgb(0, 0, 0); font-family: Arial, Helvetica, &quot;Hiragino Sans GB&quot;, 微软雅黑, &quot;Microsoft YaHei UI&quot;, SimSun, SimHei, arial, sans-serif; font-size: 1rem; font-style: normal; font-weight: normal; text-align: start; text-indent: 0px; display: inline !important">Nginx &nbsp; &nbsp; &nbsp; &nbsp; /usr/nginx-1.4.2</span></span></div><div style="margin: 0px; color: rgb(0, 0, 0); font-family: Arial, Helvetica, &quot;Hiragino Sans GB&quot;, 微软雅黑, &quot;Microsoft YaHei UI&quot;, SimSun, SimHei, arial, sans-serif; font-size: 1rem; font-style: normal; font-weight: normal; text-align: start; text-indent: 0px"><span style="color: rgb(0, 0, 0); font-family: Arial, Helvetica, &quot;Hiragino Sans GB&quot;, 微软雅黑, &quot;Microsoft YaHei UI&quot;, SimSun, SimHei, arial, sans-serif; font-size: 1rem; font-style: normal; font-weight: normal; text-align: start; text-indent: 0px; display: inline !important">redis &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; /usr/redis3.2.5-1</span></div><div style="margin: 0px; color: rgb(0, 0, 0); font-family: Arial, Helvetica, &quot;Hiragino Sans GB&quot;, 微软雅黑, &quot;Microsoft YaHei UI&quot;, SimSun, SimHei, arial, sans-serif; font-size: 1rem; font-style: normal; font-weight: normal; text-align: start; text-indent: 0px"><span style="color: rgb(0, 0, 0); font-family: Arial, Helvetica, &quot;Hiragino Sans GB&quot;, 微软雅黑, &quot;Microsoft YaHei UI&quot;, SimSun, SimHei, arial, sans-serif; font-size: 1rem; font-style: normal; font-weight: normal; text-align: start; text-indent: 0px; display: inline !important">tomcat &nbsp; &nbsp; &nbsp; /usr/apache/tomcat-7-1</span></div><div style="margin: 0px; color: rgb(0, 0, 0); font-family: Arial, Helvetica, &quot;Hiragino Sans GB&quot;, 微软雅黑, &quot;Microsoft YaHei UI&quot;, SimSun, SimHei, arial, sans-serif; font-size: 1rem; font-style: normal; font-weight: normal; text-align: start; text-indent: 0px"><span style="color: rgb(0, 0, 0); font-family: Arial, Helvetica, &quot;Hiragino Sans GB&quot;, 微软雅黑, &quot;Microsoft YaHei UI&quot;, SimSun, SimHei, arial, sans-serif; font-size: 1rem; font-style: normal; font-weight: normal; text-align: start; text-indent: 0px; display: inline !important">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;/usr/apache/tomcat-7-2<br></span></div><div style="margin: 0px; color: rgb(0, 0, 0); font-family: Arial, Helvetica, &quot;Hiragino Sans GB&quot;, 微软雅黑, &quot;Microsoft YaHei UI&quot;, SimSun, SimHei, arial, sans-serif; font-size: 1rem; font-style: normal; font-weight: normal; text-align: start; text-indent: 0px"><span style="color: rgb(0, 0, 0); font-family: Arial, Helvetica, &quot;Hiragino Sans GB&quot;, 微软雅黑, &quot;Microsoft YaHei UI&quot;, SimSun, SimHei, arial, sans-serif; font-size: 1rem; font-style: normal; font-weight: normal; text-align: start; text-indent: 0px; display: inline !important">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;/usr/apache/tomcat-7-3</span></div></td></tr></tbody></table></div></div><div><h2>1配置tomcat</h2><div>Linux系统下怎样配置多个Tomcat同时运行呢:</div><div><span style="font-size: 0.75rem; line-height: 1.6"><br></span></div><div><span style="font-size: 0.75rem; line-height: 1.6">如何在同一系统里同时启动多个Tomcat.</span><br></div></div><div><b>(1)配置环境变量vi /etc/profile</b></div><div>在最后加上配置, 比如这里加了3台tomcat&nbsp;</div><div><div><div class="wiz-code-container" data-mode="Shell" id="wiz_cm_1504591274125_4868" data-theme="default"><pre><code class="hljs makefile"><span class="hljs-comment">#--------------------------------------------------------------------</span>
<span class="hljs-comment">#set tomcat path @olddoor</span>
<span class="hljs-comment">###  first tomcat  ###</span>
CATALINA_BASE=/usr/apache/tomcat-7-1
CATALINA_HOME=/usr/apache/tomcat-7-1
TOMCAT_HOME=/usr/apache/tomcat-7-1
<span class="hljs-keyword">export</span> CATALINA_BASE CATALINA_HOME TOMCAT_HOME

<span class="hljs-comment">###  second tomcat ###</span>
CATALINA_2_BASE=/usr/apache/tomcat-7-2
CATALINA_2_HOME=/usr/apache/tomcat-7-2
TOMCAT_2_HOME=/usr/apache/tomcat_7-2
<span class="hljs-keyword">export</span> CATALINA_2_BASE CATALINA_2_HOME TOMCAT_2_HOME

<span class="hljs-comment">### third tomcat ###</span>
CATALINA_3_BASE=/usr/apache/tomcat-7-3
CATALINA_3_HOME=/usr/apache/tomcat-7-3
TOMCAT_HOME=/usr/apache/tomcat-7-3
<span class="hljs-keyword">export</span> CATALINA_3_BASE CATALINA_3_HOME TOMCAT_3_HOME

<span class="hljs-comment">#set java path--------------------------------------------------------</span>
JAVA_HOME=/usr/java/jdk1.7
<span class="hljs-keyword">export</span> JRE_HOME=$JAVA_HOME/jre
<span class="hljs-keyword">export</span> CLASSPATH=$JAVA_HOME/lib:$JRE_HOME/lib:$CLASSPATH
<span class="hljs-keyword">export</span> PATH=$JAVA_HOME/bin:$JRE_HOME/bin:$PATH</code></pre><div></div></div><div>(2) 3台tomcat的端口号记得在server.xml修改.</div></div></div><div></div><div><div>(3) 然后修改tomcat的bin目录下的<span style="font-size: 0.75rem; line-height: 1.6">catalina.sh, 加入代码</span></div></div><div>以tomcat2为例</div><div><div><div class="wiz-code-container" data-mode="XML" id="wiz_cm_1504591274105_779" data-theme="default"><pre><code class="hljs objectivec">　  <span class="hljs-keyword">export</span> JAVA_HOME=
　　<span class="hljs-keyword">export</span> PATH=
　　<span class="hljs-keyword">export</span> <span class="hljs-built_in">CLASSPATH</span>=
　　<span class="hljs-meta">###以上三个环境变量就是JAVA的环境变量可以不写###</span>
　　<span class="hljs-keyword">export</span> <span class="hljs-built_in">CATALINA_BASE</span>=$<span class="hljs-built_in">CATALINA_2_BASE</span>  <span class="hljs-meta">#配置对应的tomcat变量即可</span>
　　<span class="hljs-keyword">export</span> <span class="hljs-built_in">CATALINA_HOME</span>=$<span class="hljs-built_in">CATALINA_2_HOME</span></code></pre><div></div></div><div>搞定. 启动3个tomcat试一下效果.</div></div></div><div>默认访问的tomcat-1的index.jsp如下</div><div><div class="wiz-code-container" data-mode="HTML" id="wiz_cm_1504591274076_7270" data-theme="default"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">html</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">http-equiv</span>=<span class="hljs-string">"Content-Type"</span> <span class="hljs-attr">content</span>=<span class="hljs-string">"text/html; charset=ISO-8859-1"</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>Insert title here<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>
hello<span class="hljs-tag">&lt;<span class="hljs-name">br</span>/&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"img1"</span> <span class="hljs-attr">src</span>=<span class="hljs-string">/test/static/404-1.jpg</span> /&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"img1"</span> <span class="hljs-attr">src</span>=<span class="hljs-string">/test/jpgs/123.jpg</span> /&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span></code></pre><div></div></div><div><span style="font-size: 0.75rem; line-height: 19.2px">tomcat-2 和</span><span style="font-size: 0.75rem; line-height: 19.2px">tomcat-3的index.jsp 中的404图片名字分别为404-2.jsp 和404-3.jpg</span><br></div></div><div><span style="line-height: 19.2px">最后访问效果</span></div><div><span style="line-height: 19.2px">tomcat-1:</span></div><div><span style="line-height: 19.2px"><img src="assets/1551066199-60ad1ee7260906257a444cd8783b112b.jpg" border="0" class="" width="382" height="116"><div>&nbsp;</div></span></div><div><span style="line-height: 19.2px">tomcat-2</span></div><div><span style="line-height: 19.2px"><img src="assets/1551066199-973aa93c74c171ba7d60e7334d88b266.jpg" border="0" class="" width="286" height="192"></span><div style="line-height: 19.2px">&nbsp;</div><div style="line-height: 19.2px">tomcat3</div><div style="line-height: 19.2px"><img src="assets/1551066199-57d1ce8700bb527e2f72f63a1415998a.jpg" border="0" class="" width="268" height="318"></div><div style="line-height: 19.2px">tomcat2和tomcat3的webapps目录下并未放置<span style="color: rgb(221, 17, 68); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 0.813rem; line-height: 18px; white-space: pre; background-color: rgb(247, 247, 249)"><span data-wiz-span="data-wiz-span" style="color: rgb(0, 0, 0); font-size: 1.167rem">jpgs/123.jpg图片所以找不到.</span></span></div><div><font><span style="font-size: 0.813rem; line-height: 18px; white-space: pre"></span></font><h2><font><span style="font-size: 0.813rem; line-height: 18px; white-space: pre">2配置nginx</span></font></h2><div>修改nginx.conf</div><div><div class="wiz-code-container" data-mode="Lua" id="wiz_cm_1504591273922_8857" data-theme="default"><pre><code class="hljs nginx"><span class="hljs-comment">#user  nobody;  # user  root root #Nginx所在的用户和用户组</span>
<span class="hljs-attribute">user</span>  root root; <span class="hljs-comment">#Nginx所在的用户和用户组</span>
<span class="hljs-attribute">worker_processes</span>  <span class="hljs-number">1</span>;<span class="hljs-comment"># 启动的工作进程数量</span>
<span class="hljs-comment">#错误日志存放路径  </span>
<span class="hljs-comment">#error_log  logs/error.log;</span>
<span class="hljs-comment">#error_log  logs/error.log  notice;</span>
<span class="hljs-comment">#error_log  logs/error.log  info;</span>
<span class="hljs-attribute">error_log</span>  logs/error.log  <span class="hljs-literal">info</span>;  <span class="hljs-comment">#add by olddoor-----------</span>

<span class="hljs-comment">#pid        logs/nginx.pid;</span>

<span class="hljs-comment">#add by olddoor-----------</span>

<span class="hljs-comment">#add end------------------</span>

<span class="hljs-section">events</span> {
    <span class="hljs-attribute">worker_connections</span>  <span class="hljs-number">1024</span>;
}


<span class="hljs-section">http</span> {
    <span class="hljs-attribute">include</span>       mime.types;
    <span class="hljs-attribute">default_type</span>  application/octet-stream;
    <span class="hljs-comment">#定义日志格式  </span>
    <span class="hljs-comment">#log_format  main  '$remote_addr - $remote_user [$time_local] "$request" '</span>
    <span class="hljs-comment">#                  '$status $body_bytes_sent "$http_referer" '</span>
    <span class="hljs-comment">#                  '"$http_user_agent" "$http_x_forwarded_for"';</span>

    <span class="hljs-comment">#access_log  logs/access.log  main;</span>

    <span class="hljs-attribute">sendfile</span>        <span class="hljs-literal">on</span>;
    <span class="hljs-comment">#tcp_nopush     on;</span>

    <span class="hljs-comment">#keepalive_timeout  0;</span>
    <span class="hljs-attribute">keepalive_timeout</span>  <span class="hljs-number">65</span>;

    <span class="hljs-comment">#gzip  on;</span>
	<span class="hljs-comment">#add by olddor---------------------</span>
	<span class="hljs-attribute">upstream</span> localhost { 
	<span class="hljs-comment">#发到localhost上的请求，通过Nginx转发到实际处理请求的服务器</span>
           <span class="hljs-attribute">server</span> <span class="hljs-number">192.168.64.132:8080</span> weight=<span class="hljs-number">1</span>;
           <span class="hljs-attribute">server</span> <span class="hljs-number">192.168.64.132:8081</span> weight=<span class="hljs-number">1</span>;
		   <span class="hljs-attribute">server</span> <span class="hljs-number">192.168.64.132:8082</span> weight=<span class="hljs-number">1</span>;
    }
	<span class="hljs-comment">#add by olddor over----------------</span>
    <span class="hljs-section">server</span> {
        <span class="hljs-attribute">listen</span>       <span class="hljs-number">8000</span>;  <span class="hljs-comment">#宿主机访问虚拟机的80端口好像有点问题,建议不使用80端口</span>
        <span class="hljs-attribute">server_name</span>  localhost;

        <span class="hljs-comment">#charset koi8-r;</span>

        <span class="hljs-comment">#access_log  logs/host.access.log  main;</span>

        <span class="hljs-attribute">location</span> / {
			<span class="hljs-attribute">proxy_connect_timeout</span>   <span class="hljs-number">3</span>; <span class="hljs-comment">#add by olddoor  </span>
			<span class="hljs-attribute">proxy_send_timeout</span>      <span class="hljs-number">30</span>; <span class="hljs-comment">#add by olddoor </span>
			<span class="hljs-attribute">proxy_read_timeout</span>      <span class="hljs-number">30</span>; <span class="hljs-comment">#add by olddoor </span>
            <span class="hljs-attribute">proxy_pass</span> http://localhost;  <span class="hljs-comment">#add by olddoor</span>
            <span class="hljs-comment">#root   html; #ignore by olddoor 	</span>
            <span class="hljs-comment">#index  index.html index.htm; #ignore by olddoor 	</span>
        }
		<span class="hljs-attribute">location</span>  /test/jpgs/ {
            <span class="hljs-attribute">alias</span> /data/imgs/;
        }		
		
		<span class="hljs-comment">#location /jpgs</span>
		

        <span class="hljs-comment">#error_page  404              /404.html;</span>

        <span class="hljs-comment"># redirect server error pages to the static page /50x.html</span>
        <span class="hljs-comment">#</span>
        <span class="hljs-attribute">error_page</span>   <span class="hljs-number">500</span> <span class="hljs-number">502</span> <span class="hljs-number">503</span> <span class="hljs-number">504</span>  /50x.html;
        <span class="hljs-attribute">location</span> = /50x.html {
            <span class="hljs-attribute">root</span>   html;
        }




        <span class="hljs-comment"># deny access to .htaccess files, if Apache's document root</span>
        <span class="hljs-comment"># concurs with nginx's one</span>
        <span class="hljs-comment">#</span>
        <span class="hljs-comment">#location ~ /\.ht {</span>
        <span class="hljs-comment">#    deny  all;</span>
        <span class="hljs-comment">#}</span>
    }


    <span class="hljs-comment"># another virtual host using mix of IP-, name-, and port-based configuration</span>
    <span class="hljs-comment">#</span>
    <span class="hljs-comment">#server {</span>
    <span class="hljs-comment">#    listen       8000;</span>
    <span class="hljs-comment">#    listen       somename:8080;</span>
    <span class="hljs-comment">#    server_name  somename  alias  another.alias;</span>

    <span class="hljs-comment">#    location / {</span>
    <span class="hljs-comment">#        root   html;</span>
    <span class="hljs-comment">#        index  index.html index.htm;</span>
    <span class="hljs-comment">#    }</span>
    <span class="hljs-comment">#}</span>


    <span class="hljs-comment"># HTTPS server</span>
    <span class="hljs-comment">#</span>
    <span class="hljs-comment">#server {</span>
    <span class="hljs-comment">#    listen       443;</span>
    <span class="hljs-comment">#    server_name  localhost;</span>

    <span class="hljs-comment">#    ssl                  on;</span>
    <span class="hljs-comment">#    ssl_certificate      cert.pem;</span>
    <span class="hljs-comment">#    ssl_certificate_key  cert.key;</span>

    <span class="hljs-comment">#    ssl_session_timeout  5m;</span>

    <span class="hljs-comment">#    ssl_protocols  SSLv2 SSLv3 TLSv1;</span>
    <span class="hljs-comment">#    ssl_ciphers  HIGH:!aNULL:!MD5;</span>
    <span class="hljs-comment">#    ssl_prefer_server_ciphers   on;</span>

    <span class="hljs-comment">#    location / {</span>
    <span class="hljs-comment">#        root   html;</span>
    <span class="hljs-comment">#        index  index.html index.htm;</span>
    <span class="hljs-comment">#    }</span>
    <span class="hljs-comment">#}</span>

}</code></pre><div></div></div><div>通过</div></div><div><div>&nbsp;server 192.168.64.132:8080 weight=1;</div><div>&nbsp;server 192.168.64.132:8081 weight=1;</div><div>&nbsp;server 192.168.64.132:8082 weight=1;</div></div><div>的配置完成3台tomcat的轮询负载均衡.</div><div>访问时候使用&nbsp;<span style="font-size: 0.75rem; line-height: 19.2px"><span data-wiz-span="data-wiz-span" style="font-size: 1.167rem; color: rgb(0, 147, 0)">192.168.64.132:8000/test 取代</span></span><span style="font-size: 0.75rem; line-height: 19.2px"><span data-wiz-span="data-wiz-span" style="font-size: 1.167rem; color: rgb(0, 147, 0)">192.168.64.132:8080/test ,&nbsp;</span></span><span style="font-size: 0.75rem; line-height: 19.2px"><span data-wiz-span="data-wiz-span" style="font-size: 1.167rem; color: rgb(0, 147, 0)">192.168.64.132:8081/test ,&nbsp;</span></span><span style="font-size: 0.75rem; line-height: 19.2px"><span data-wiz-span="data-wiz-span" style="font-size: 1.167rem; color: rgb(0, 147, 0)">192.168.64.132:8082/test</span></span></div><div><span style="font-size: 0.75rem; line-height: 19.2px"><br></span></div><h2><span style="font-size: 0.75rem; line-height: 19.2px">3 使用nginx管理部分静态数据</span></h2><div><span style="line-height: 19.2px">配置方式可以直接拦截指定路径的 jpg之类的文件.</span></div><div><span style="line-height: 19.2px">这里只拦截目录</span></div><div><div><span style="line-height: 19.2px"><span class="Apple-tab-span" style="white-space: pre">	</span>location &nbsp;/test/jpgs/ {</span></div><div><span style="line-height: 19.2px">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; alias /data/imgs/; &nbsp;#即拦截&nbsp;</span><span style="font-size: 0.75rem; line-height: 19.2px">&nbsp;/test/jpgs/请求-&gt;匹配物理路径: &nbsp; &nbsp;</span><span style="font-size: 0.75rem; line-height: 19.2px">/data/imgs/</span></div><div><span style="line-height: 19.2px">&nbsp; &nbsp; &nbsp; &nbsp; }<span class="Apple-tab-span" style="white-space: pre">	</span></span></div></div><div>注意alias 和root 的拦截逻辑略有不同.</div><div><br></div><div>在linux服务器上创建对应的文件夹并上传图片123.jpg</div><div><br></div><div><b>启动三台tomcat以及Nginx服务器. 然后进行测试:</b></div><div><br></div><div>继续通过<span style="font-size: 0.75rem; line-height: 19.2px">192.168.64.132:8080/test访问可以看到效果是:</span></div><div><span style="font-size: 0.75rem; line-height: 19.2px"><img src="assets/1551066199-094d9f1223dcce4230b2bea408a7c1fa.jpg" border="0" class="" width="650" height="186"><div>&nbsp;</div></span></div><div><span style="line-height: 19.2px">两张图片的来源都是tomcat-1</span></div><div><span style="line-height: 19.2px"><img src="assets/1551066199-8f5299a21af1227c08e1870e7358b344.png" border="0" class="" width="437" height="182"><div>&nbsp;</div></span></div><div>而访问<span style="font-size: 0.75rem; line-height: 19.2px">192.168.64.132:8000/test 使用nginx服务则</span></div><div><span style="line-height: 19.2px">随机显示第一张图片. 而第二张123.jpg 则显示的是nginx指定目录的图片而非tomcat上的图片.</span></div><div><img src="assets/1551066199-e08c3554ac36b65f6618ea43a8233518.jpg" border="0" class="" width="582" height="306"><div>&nbsp;</div></div><div><span style="line-height: 19.2px">或者是</span></div><div><img src="assets/1551066199-e31566e15317365036952e7e5cd3a442.jpg" border="0" class="" width="743" height="409"><div>&nbsp;</div><span style="line-height: 19.2px"><br><div>&nbsp;</div></span></div><div><span style="line-height: 19.2px">2张图片来源都是nginx, 只是第一个是nginx到tomcat上获取. 第二张图片被拦截到/data/imgs上获取.</span></div><div><span style="line-height: 19.2px"><img src="assets/1551066199-3a125b601bc736797cecc55f7b4999f2.png" border="0" class="" width="417" height="223"><div>&nbsp;以404-2为例</div></span></div><img src="assets/1551066199-b8edc9c88a398aac67af79910e9b3cfa.png" border="0" class="" width="693" height="430"><div>&nbsp;</div><div><br><div style="line-height: 19.2px">&nbsp;</div><h2 style="line-height: 19.2px">4 性能测试对比</h2><div><div><span style="font-size: 0.75rem; line-height: 19.2px">使用ab工具的压力测试方法和结果，</span><span style="font-size: 0.75rem; line-height: 19.2px">ab是针对apache的性能测试工具，可以只安装ab工具。</span></div><div><span style="line-height: 19.2px; font-size: 0.75rem">ubuntu安装ab</span><br></div></div></div><div><div style="font-size: 0.75rem; line-height: 19.2px" class="wiz-code-container" data-mode="Lua" id="wiz_cm_1504591273911_7894" data-theme="default"><pre><code class="hljs cmake">apt-get <span class="hljs-keyword">install</span> apache2-utils</code></pre><div></div></div><div><div><span style="line-height: 19.2px">centos安装ab</span></div><div><div class="wiz-code-container" data-mode="Lua" id="wiz_cm_1504591273899_7630" data-theme="default"><pre><code class="hljs cmake">yum <span class="hljs-keyword">install</span> httpd-tools</code></pre><div></div></div><div>通过命令测试:</div></div></div></div><div><div>ab -kc 1000 -n 1000 http://192.168.64.132:8080/test/</div><div>这个指令会使用1000个并发，进行连接1000次测试tomcat-1</div></div><div><span style="font-size: 0.75rem; line-height: 19.2px">ab -kc 1000 -n 1000 http://192.168.64.132:80/test/</span><br></div><div><span style="font-size: 0.75rem; line-height: 19.2px">这个指令会使用1000个并发，进行连接1000次测试nginx</span><br></div><div><span style="line-height: 19.2px">对比结果:</span></div><div><span style="line-height: 19.2px">8080</span></div><div><div class="wiz-code-container" data-mode="HTML" id="wiz_cm_1504591273859_5190" data-theme="default"><pre><code class="hljs shell"><span class="hljs-meta">#</span><span class="bash">用于描述每个请求处理时间的分布情况，例如：50% 28 50%请求处理时间不超过28毫秒 （这里所指的处理时间是指：Time per request ）</span>
Percentage of the requests served within a certain time (ms)
<span class="hljs-meta">  50%</span><span class="bash">     28</span>
<span class="hljs-meta">  66%</span><span class="bash">     32</span>
<span class="hljs-meta">  75%</span><span class="bash">     34</span>
<span class="hljs-meta">  80%</span><span class="bash">     35</span>
<span class="hljs-meta">  90%</span><span class="bash">     53</span>
<span class="hljs-meta">  95%</span><span class="bash">     62</span>
<span class="hljs-meta">  98%</span><span class="bash">     65</span>
<span class="hljs-meta">  99%</span><span class="bash">     66</span>
<span class="hljs-meta"> 100%</span><span class="bash">   1823 (longest request)</span>
second表示当前测试的服务器每秒可以处理16.54个静态html的请求事务，后面的mean表示平均。这个数值表示当前机器的整体性能，值越大越好。
Requests per second:    547.04 [#/sec] (mean)
Time per request:       1828.016 [ms] (mean)
Time per request:       1.828 [ms] (mean, across all concurrent requests)
Transfer rate:          76.93 [Kbytes/sec] received
</code></pre><div></div></div><div style="line-height: 19.2px"><div>80 &nbsp; nginx在小规模请求下响应速度慢于直接请求tomcat, 而处理能力<span style="font-size: 0.75rem; line-height: 19.2px">nginx明显强于tomcat</span></div></div><div><div class="wiz-code-container" data-mode="HTML" id="wiz_cm_1504591273832_8298" data-theme="default"><pre><code class="hljs shell">Percentage of the requests served within a certain time (ms)
<span class="hljs-meta">  50%</span><span class="bash">    107</span>
<span class="hljs-meta">  66%</span><span class="bash">    201</span>
<span class="hljs-meta">  75%</span><span class="bash">    243</span>
<span class="hljs-meta">  80%</span><span class="bash">    257</span>
<span class="hljs-meta">  90%</span><span class="bash">    334</span>
<span class="hljs-meta">  95%</span><span class="bash">    360</span>
<span class="hljs-meta">  98%</span><span class="bash">   1116</span>
<span class="hljs-meta">  99%</span><span class="bash">   1117</span>
<span class="hljs-meta"> 100%</span><span class="bash">   1118 (longest request)</span>
second表示当前测试的服务器每秒可以处理16.54个静态html的请求事务，后面的mean表示平均。这个数值表示当前机器的整体性能，值越大越好。
Requests per second:    873.38 [#/sec] (mean)
Time per request:       1144.983 [ms] (mean)
Time per request:       1.145 [ms] (mean, across all concurrent requests)
Transfer rate:          216.83 [Kbytes/sec] received
</code></pre><div></div></div><div style="line-height: 19.2px"><br></div></div></div><div>当请求改为1000个并发，进行连接1000次后</div><div>8080已经无法及时响应</div><div><div class="wiz-code-container" data-mode="HTML" id="wiz_cm_1504591273811_8912" data-theme="default"><pre><code class="hljs groovy">This is ApacheBench, Version <span class="hljs-number">2.3</span> &lt;<span class="hljs-string">$Revision:</span> <span class="hljs-number">1528965</span> $&gt;
Copyright <span class="hljs-number">1996</span> Adam Twiss, Zeus Technology Ltd, <span class="hljs-string">http:</span><span class="hljs-comment">//www.zeustech.net/</span>
Licensed to The Apache Software Foundation, <span class="hljs-string">http:</span><span class="hljs-comment">//www.apache.org/</span>

Benchmarking localhost (be patient)
Total of <span class="hljs-number">9967</span> requests completed</code></pre><div></div></div><div>而80还是稳稳的</div></div><div><div class="wiz-code-container" data-mode="HTML" id="wiz_cm_1504591273722_8226" data-theme="default"><pre><code class="hljs yaml"><span class="hljs-string">Server</span> <span class="hljs-attr">Hostname:</span>        <span class="hljs-string">localhost</span>
<span class="hljs-string">Server</span> <span class="hljs-attr">Port:</span>            <span class="hljs-number">80</span>

<span class="hljs-string">Time</span> <span class="hljs-string">taken</span> <span class="hljs-string">for</span> <span class="hljs-attr">tests:</span>   <span class="hljs-number">1.145</span> <span class="hljs-string">seconds</span>
<span class="hljs-string">Complete</span> <span class="hljs-attr">requests:</span>      <span class="hljs-number">1000</span>
<span class="hljs-string">Failed</span> <span class="hljs-attr">requests:</span>        <span class="hljs-number">551</span>
   <span class="hljs-string">(Connect:</span> <span class="hljs-number">0</span><span class="hljs-string">,</span> <span class="hljs-attr">Receive:</span> <span class="hljs-number">0</span><span class="hljs-string">,</span> <span class="hljs-attr">Length:</span> <span class="hljs-number">551</span><span class="hljs-string">,</span> <span class="hljs-attr">Exceptions:</span> <span class="hljs-number">0</span><span class="hljs-string">)</span>
<span class="hljs-string">Non-2xx</span> <span class="hljs-attr">responses:</span>      <span class="hljs-number">1000</span>
<span class="hljs-string">Keep-Alive</span> <span class="hljs-attr">requests:</span>    <span class="hljs-number">0</span>
<span class="hljs-string">Total</span> <span class="hljs-attr">transferred:</span>      <span class="hljs-number">254220</span> <span class="hljs-string">bytes</span>
<span class="hljs-string">HTML</span> <span class="hljs-attr">transferred:</span>       <span class="hljs-number">105792</span> <span class="hljs-string">bytes</span>
<span class="hljs-string">second表示当前测试的服务器每秒可以处理16.54个静态html的请求事务，后面的mean表示平均。这个数值表示当前机器的整体性能，值越大越好。</span>
<span class="hljs-string">Requests</span> <span class="hljs-string">per</span> <span class="hljs-attr">second:</span>    <span class="hljs-number">873.38</span> <span class="hljs-string">[#/sec]</span> <span class="hljs-string">(mean)</span>
<span class="hljs-string">Time</span> <span class="hljs-string">per</span> <span class="hljs-attr">request:</span>       <span class="hljs-number">1144.983</span> <span class="hljs-string">[ms]</span> <span class="hljs-string">(mean)</span>
<span class="hljs-string">Time</span> <span class="hljs-string">per</span> <span class="hljs-attr">request:</span>       <span class="hljs-number">1.145</span> <span class="hljs-string">[ms]</span> <span class="hljs-string">(mean,</span> <span class="hljs-string">across</span> <span class="hljs-string">all</span> <span class="hljs-string">concurrent</span> <span class="hljs-string">requests)</span>
<span class="hljs-string">Transfer</span> <span class="hljs-attr">rate:</span>          <span class="hljs-number">216.83</span> <span class="hljs-string">[Kbytes/sec]</span> <span class="hljs-string">received</span>

<span class="hljs-string">Connection</span> <span class="hljs-string">Times</span> <span class="hljs-string">(ms)</span>
              <span class="hljs-string">min</span>  <span class="hljs-string">mean[+/-sd]</span> <span class="hljs-string">median</span>   <span class="hljs-string">max</span>
<span class="hljs-attr">Connect:</span>       <span class="hljs-number">16</span>   <span class="hljs-number">26</span>   <span class="hljs-number">4.6</span>     <span class="hljs-number">27</span>      <span class="hljs-number">33</span>
<span class="hljs-attr">Processing:</span>    <span class="hljs-number">16</span>  <span class="hljs-number">155</span> <span class="hljs-number">174.5</span>     <span class="hljs-number">88</span>    <span class="hljs-number">1101</span>
<span class="hljs-attr">Waiting:</span>       <span class="hljs-number">13</span>  <span class="hljs-number">155</span> <span class="hljs-number">174.6</span>     <span class="hljs-number">88</span>    <span class="hljs-number">1101</span>
<span class="hljs-attr">Total:</span>         <span class="hljs-number">44</span>  <span class="hljs-number">181</span> <span class="hljs-number">172.5</span>    <span class="hljs-number">107</span>    <span class="hljs-number">1118</span>

<span class="hljs-string">Percentage</span> <span class="hljs-string">of</span> <span class="hljs-string">the</span> <span class="hljs-string">requests</span> <span class="hljs-string">served</span> <span class="hljs-string">within</span> <span class="hljs-string">a</span> <span class="hljs-string">certain</span> <span class="hljs-string">time</span> <span class="hljs-string">(ms)</span>
  <span class="hljs-number">50</span><span class="hljs-string">%</span>    <span class="hljs-number">107</span>
  <span class="hljs-number">66</span><span class="hljs-string">%</span>    <span class="hljs-number">201</span>
  <span class="hljs-number">75</span><span class="hljs-string">%</span>    <span class="hljs-number">243</span>
  <span class="hljs-number">80</span><span class="hljs-string">%</span>    <span class="hljs-number">257</span>
  <span class="hljs-number">90</span><span class="hljs-string">%</span>    <span class="hljs-number">334</span>
  <span class="hljs-number">95</span><span class="hljs-string">%</span>    <span class="hljs-number">360</span>
  <span class="hljs-number">98</span><span class="hljs-string">%</span>   <span class="hljs-number">1116</span>
  <span class="hljs-number">99</span><span class="hljs-string">%</span>   <span class="hljs-number">1117</span>
 <span class="hljs-number">100</span><span class="hljs-string">%</span>   <span class="hljs-number">1118</span> <span class="hljs-string">(longest</span> <span class="hljs-string">request)</span></code></pre><div></div></div><div><br></div></div><div><span style="line-height: 19.2px">tips 如需将屏幕上的测试结果生成为文本文件, 可以在测试时候配合|tee 命令</span></div><div><span style="line-height: 19.2px">如:</span></div><div><div class="wiz-code-container" data-mode="Shell" id="wiz_cm_1504591273647_7895" data-theme="default"><pre><code class="hljs awk">ab -kc <span class="hljs-number">1000</span> -n <span class="hljs-number">1000</span> http:<span class="hljs-regexp">//</span><span class="hljs-number">192.168</span>.<span class="hljs-number">64.132</span>:<span class="hljs-number">80</span><span class="hljs-regexp">/test/</span> |tee <span class="hljs-regexp">/usr/</span><span class="hljs-number">111</span>.txt  <span class="hljs-comment">#将结果保存到/usr/111.txt中</span></code></pre><div></div></div><div><br></div></div><div><span style="font-size: 0.75rem; line-height: 19.2px"><br></span></div><div><span style="font-size: 0.75rem; line-height: 19.2px"><br></span></div><div><span style="font-size: 0.75rem; line-height: 19.2px"></span></div><h2 style="margin: 1.25rem 0px 0.625rem; padding: 0px; font-weight: bold; font-size: 1.5rem; color: rgb(0, 0, 0); font-family: Helvetica, &quot;Hiragino Sans GB&quot;, 微软雅黑, &quot;Microsoft YaHei UI&quot;, SimSun, SimHei, arial, sans-serif; font-style: normal; text-align: start; text-indent: 0px">二、Nginx + Tomcat +Redis (用户session会话集中管理)</h2><div>参考<a href="https://lanjingling.github.io/2015/12/15/tomcat-redis-session/">https://lanjingling.github.io/2015/12/15/tomcat-redis-session/</a> </div><div><br></div><div><span style="font-size: 0.75rem; line-height: 19.2px">在上例的基础上新增Redis, 用于集中管理用户会话session</span></div><div><span style="font-size: 0.75rem; line-height: 19.2px">效果如图</span></div><div><span style="font-size: 0.75rem; line-height: 19.2px"><img src="assets/1551066199-93c3c052b681f5ff4fa0ba9904b0b74d.jpg" border="0"></span><div style="font-size: 0.75rem; line-height: 19.2px">&nbsp;</div><div style="font-size: 0.75rem; line-height: 19.2px"><span data-wiz-span="data-wiz-span" style="font-size: 1rem">配置过程</span></div><div style="font-size: 0.75rem; line-height: 19.2px"><span data-wiz-span="data-wiz-span" style="font-size: 0.833rem; font-family: 黑体"><span data-wiz-span="data-wiz-span" style="font-size: 1.333rem">1 、实验环境介绍</span>：</span><br></div><div style="font-size: 0.75rem; line-height: 19.2px"><p style="margin: 0px 0px 25px; color: rgb(85, 85, 85); font-family: Lato, &quot;Microsoft Jhenghei&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, sans-serif; font-size: 1rem; font-style: normal; font-weight: normal; text-align: justify; text-indent: 0px; background-color: rgb(255, 255, 255)">安装nginx、tomcat、redis服务</p><div class="wiz-table-container" style="position: relative; padding: 0px"><div class="wiz-table-body"><table style="width: 699px; font-size: 0.875rem; color: rgb(85, 85, 85); font-family: Lato, &quot;Microsoft Jhenghei&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, sans-serif; font-style: normal; font-weight: normal; text-align: justify; text-indent: 0px; background-color: rgb(255, 255, 255)"><thead><tr><th style="padding: 8px 8px 10px; text-align: left; font-weight: 700"><strong style="font-weight: bold">软件</strong></th><th style="padding: 8px 8px 10px; text-align: center; font-weight: 700"><strong style="font-weight: bold">version</strong></th><th style="padding: 8px 8px 10px; text-align: center; font-weight: 700"><strong style="font-weight: bold">ip：port</strong></th></tr></thead><tbody><tr style="background-color: rgb(249, 249, 249)"><td style="padding: 8px; text-align: left; font-weight: normal">Nginx</td><td style="padding: 8px; text-align: center; font-weight: normal" class="">1.4.6</td><td style="padding: 8px; text-align: center; font-weight: normal" class=""><span style="color: rgb(85, 85, 85); font-family: Lato, &quot;Microsoft Jhenghei&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, sans-serif; font-size: 0.875rem; font-style: normal; font-weight: normal; text-align: center; text-indent: 0px; display: inline !important; background-color: rgb(249, 249, 249)">192.168.127.58 : 8000</span><br></td></tr><tr><td style="padding: 8px; text-align: left; font-weight: normal">Redis</td><td style="padding: 8px; text-align: center; font-weight: normal" class="">3.2.5-1</td><td style="padding: 8px; text-align: center; font-weight: normal" class=""><span style="color: rgb(85, 85, 85); font-family: Lato, &quot;Microsoft Jhenghei&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, sans-serif; font-size: 0.875rem; font-style: normal; font-weight: normal; text-align: center; text-indent: 0px; display: inline !important; background-color: rgb(249, 249, 249)">192.168.127.58 : 7001</span><br></td></tr><tr style="background-color: rgb(249, 249, 249)"><td style="padding: 8px; text-align: left; font-weight: normal" class="">tomcat-7-1<br></td><td style="padding: 8px; text-align: center; font-weight: normal" class="">7.0.73<br></td><td style="padding: 8px; text-align: center; font-weight: normal" class="">192.168.127.58:8080<br></td></tr><tr><td style="padding: 8px; text-align: left; font-weight: normal" class="">tomcat-7-2<br></td><td style="padding: 8px; text-align: center; font-weight: normal" class=""><span style="color: rgb(85, 85, 85); font-family: Lato, &quot;Microsoft Jhenghei&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, sans-serif; font-size: 0.875rem; font-style: normal; font-weight: normal; text-align: center; text-indent: 0px; display: inline !important; background-color: rgb(249, 249, 249)">7.0.73</span><br></td><td style="padding: 8px; text-align: center; font-weight: normal" class=""><span style="color: rgb(85, 85, 85); font-family: Lato, &quot;Microsoft Jhenghei&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, sans-serif; font-size: 0.875rem; font-style: normal; font-weight: normal; text-align: center; text-indent: 0px; display: inline !important; background-color: rgb(249, 249, 249)">192.168.127.58:8081</span><br></td></tr><tr><td class="" style="padding: 8px; text-align: left; font-weight: normal">tomcat-7-3<br></td><td style="padding: 8px; text-align: center; font-weight: normal" class=""><span style="color: rgb(85, 85, 85); font-family: Lato, &quot;Microsoft Jhenghei&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, sans-serif; font-size: 0.875rem; font-style: normal; font-weight: normal; text-align: center; text-indent: 0px; display: inline !important; background-color: rgb(249, 249, 249)">7.0.73</span><br></td><td style="padding: 8px; text-align: center; font-weight: normal" class=""><span style="color: rgb(85, 85, 85); font-family: Lato, &quot;Microsoft Jhenghei&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, sans-serif; font-size: 0.875rem; font-style: normal; font-weight: normal; text-align: center; text-indent: 0px; display: inline !important; background-color: rgb(249, 249, 249)">192.168.127.58:8082</span><br></td></tr></tbody></table></div></div><br class="Apple-interchange-newline"><span style="color: rgb(85, 85, 85); font-family: Lato, &quot;Microsoft Jhenghei&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, sans-serif; font-size: 1rem; font-style: normal; font-weight: normal; text-align: justify; text-indent: 0px; display: inline !important; background-color: rgb(255, 255, 255)"><span data-wiz-span="data-wiz-span" style="font-family: 黑体; font-size: 1.333rem">2、测试：</span></span><br></div><div style="font-size: 0.75rem; line-height: 19.2px"><span data-wiz-span="data-wiz-span" style="font-family: 黑体; font-size: 1rem">编写id.jsp 放到3个tomcat的&nbsp;/webapps/test下</span></div><div class="wiz-code-container" id="wiz_cm_1504686665682_1490" data-mode="HTML" data-theme="eclipse" style="font-size: 0.75rem; line-height: 19.2px"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>
 response from tomcat_3<span class="hljs-tag">&lt;<span class="hljs-name">br</span>/&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">%=session.getId()</span> %&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span></code></pre><div></div></div><div style="font-size: 0.75rem; line-height: 19.2px"><span style="color: rgb(85, 85, 85); font-family: Lato, &quot;Microsoft Jhenghei&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, sans-serif; font-size: 1rem; font-style: normal; font-weight: normal; text-align: justify; text-indent: 0px; display: inline !important; background-color: rgb(255, 255, 255)">此时分别访问<span style="color: rgb(85, 85, 85); font-family: Lato, &quot;Microsoft Jhenghei&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, sans-serif; font-size: 0.875rem; font-style: normal; font-weight: normal; text-align: center; text-indent: 0px; display: inline !important; background-color: rgb(249, 249, 249)">192.168.127.58:8080/test/id.jsp</span></span><span style="color: rgb(85, 85, 85); font-family: Lato, &quot;Microsoft Jhenghei&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, sans-serif; font-size: 1rem; font-style: normal; font-weight: normal; text-align: justify; text-indent: 0px; display: inline !important; background-color: rgb(255, 255, 255)"><span class="Apple-converted-space">&nbsp;</span>和<span class="Apple-converted-space"> <span style="color: rgb(85, 85, 85); font-family: Lato, &quot;Microsoft Jhenghei&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, sans-serif; font-size: 0.875rem; font-style: normal; font-weight: normal; text-align: center; text-indent: 0px; display: inline !important; background-color: rgb(249, 249, 249)">192.168.127.58:8081/test/id.jsp &nbsp;<span style="color: rgb(85, 85, 85); font-family: Lato, &quot;Microsoft Jhenghei&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, sans-serif; font-size: 0.875rem; font-style: normal; font-weight: normal; text-align: center; text-indent: 0px; display: inline !important; background-color: rgb(249, 249, 249)">192.168.127.58:8082/test/id.jsp</span></span><span style="font-style: normal; font-weight: normal; text-indent: 0px; color: rgb(85, 85, 85); font-family: Lato, &quot;Microsoft Jhenghei&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, sans-serif; font-size: 1rem; text-align: justify; display: inline !important; background-color: rgb(255, 255, 255)"><span class="Apple-converted-space">&nbsp;</span></span></span></span><span style="color: rgb(85, 85, 85); font-family: Lato, &quot;Microsoft Jhenghei&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, sans-serif; font-size: 1rem; font-style: normal; font-weight: normal; text-align: justify; text-indent: 0px; display: inline !important; background-color: rgb(255, 255, 255)"><span class="Apple-converted-space">&nbsp;</span>地址，因为访问的是不同web服务器，所以各自显示不同的页面内容及session值肯定不同。</span><br></div><div style="font-size: 0.75rem; line-height: 19.2px"><span style="color: rgb(85, 85, 85); font-family: Lato, &quot;Microsoft Jhenghei&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, sans-serif; font-size: 1rem; font-style: normal; font-weight: normal; text-align: justify; text-indent: 0px; display: inline !important; background-color: rgb(255, 255, 255)"><br></span></div><div style="font-size: 0.75rem; line-height: 19.2px"><span style="color: rgb(85, 85, 85); font-family: Lato, &quot;Microsoft Jhenghei&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, sans-serif; font-size: 1rem; font-style: normal; font-weight: normal; text-align: justify; text-indent: 0px; display: inline !important; background-color: rgb(255, 255, 255)"><span style="color: rgb(85, 85, 85); font-family: Lato, &quot;Microsoft Jhenghei&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, sans-serif; font-size: 1rem; font-style: normal; font-weight: normal; text-align: justify; text-indent: 0px; display: inline !important; background-color: rgb(255, 255, 255)">3、配置tomcat的session管理（持久化到redis中）：</span><br></span></div><div><span style="text-align: justify; text-indent: 0px; display: inline !important; background-color: rgb(255, 255, 255)"><span style="text-align: justify; text-indent: 0px; display: inline !important; background-color: rgb(255, 255, 255)"><ul style="color: rgb(85, 85, 85); font-family: Lato, &quot;Microsoft Jhenghei&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, sans-serif; font-size: 1rem; font-style: normal; font-weight: normal; line-height: 19.2px; list-style: square; text-align: justify; text-indent: 0px; background-color: rgb(255, 255, 255)"><li style="list-style: circle">添加jedis-2.0.0.jar、tomcat-redis-session-manager-1.2-tomcat-7-java-7、commons-pool-1.3.jar 三个jar到tomcat的lib目录下；</li></ul>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 注意不可用<span style="color: rgb(85, 85, 85); font-family: Lato, &quot;Microsoft Jhenghei&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, sans-serif; font-size: 1rem; font-style: normal; font-weight: normal; text-align: justify; text-indent: 0px; display: inline !important; background-color: rgb(255, 255, 255)">commons-pool-1.2.jar</span><font color="#555555"><span style="line-height: 19.2px"><br></span></font><ul style="color: rgb(85, 85, 85); font-family: Lato, &quot;Microsoft Jhenghei&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, sans-serif; font-size: 1rem; font-style: normal; font-weight: normal; line-height: 19.2px; list-style: square; text-align: justify; text-indent: 0px; background-color: rgb(255, 255, 255)"><li style="list-style: circle"><span style="color: rgb(85, 85, 85); font-family: Lato, &quot;Microsoft Jhenghei&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, sans-serif; font-size: 1rem; font-style: normal; font-weight: normal; text-align: justify; text-indent: 0px; display: inline !important; background-color: rgb(255, 255, 255)">修改tomcat的conf/context.xml 文件；</span><br></li></ul>&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;</span></span></div><div><div class="wiz-code-container" id="wiz_cm_1504686821340_4841" data-mode="XML" data-theme="default"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!--配置对应redis的服务端口 并非后台端口--&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">Valve</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"com.radiadesign.catalina.session.RedisSessionHandlerValve"</span> /&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">Manager</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"com.radiadesign.catalina.session.RedisSessionManager"</span>
             <span class="hljs-attr">host</span>=<span class="hljs-string">"localhost"</span> 
             <span class="hljs-attr">port</span>=<span class="hljs-string">"7001"</span> 
             <span class="hljs-attr">database</span>=<span class="hljs-string">"0"</span> 
             <span class="hljs-attr">maxInactiveInterval</span>=<span class="hljs-string">"60"</span>  /&gt;</span></code></pre><div></div></div></div><div style="font-size: 0.75rem; line-height: 19.2px"><span style="color: rgb(85, 85, 85); font-family: Lato, &quot;Microsoft Jhenghei&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, sans-serif; font-size: 1rem; font-style: normal; font-weight: normal; text-align: justify; text-indent: 0px; display: inline !important; background-color: rgb(255, 255, 255)">4 &nbsp;配置Nginx的负载均衡</span></div><div style="font-size: 0.75rem; line-height: 19.2px"><span style="color: rgb(85, 85, 85); font-family: Lato, &quot;Microsoft Jhenghei&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, sans-serif; font-size: 1rem; font-style: normal; font-weight: normal; text-align: justify; text-indent: 0px; display: inline !important; background-color: rgb(255, 255, 255)">本文第一部分已经做了。跳过</span></div><div style="font-size: 0.75rem; line-height: 19.2px"><span style="color: rgb(85, 85, 85); font-family: Lato, &quot;Microsoft Jhenghei&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, sans-serif; font-size: 1rem; font-style: normal; font-weight: normal; text-align: justify; text-indent: 0px; display: inline !important; background-color: rgb(255, 255, 255)"><br></span></div><div style="font-size: 0.75rem; line-height: 19.2px"><span style="color: rgb(85, 85, 85); font-family: Lato, &quot;Microsoft Jhenghei&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, sans-serif; font-size: 1rem; font-style: normal; font-weight: normal; text-align: justify; text-indent: 0px; display: inline !important; background-color: rgb(255, 255, 255)"><span style="color: rgb(85, 85, 85); font-family: Lato, &quot;Microsoft Jhenghei&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, sans-serif; font-size: 1rem; font-style: normal; font-weight: normal; text-align: justify; text-indent: 0px; display: inline !important; background-color: rgb(255, 255, 255)">5、验证：</span><br></span></div><div style="font-size: 0.75rem; line-height: 19.2px"><span style="color: rgb(85, 85, 85); font-family: Lato, &quot;Microsoft Jhenghei&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, sans-serif; font-size: 1rem; font-style: normal; font-weight: normal; text-align: justify; text-indent: 0px; display: inline !important; background-color: rgb(255, 255, 255)"><span style="color: rgb(85, 85, 85); font-family: Lato, &quot;Microsoft Jhenghei&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, sans-serif; font-size: 1rem; font-style: normal; font-weight: normal; text-align: justify; text-indent: 0px; display: inline !important; background-color: rgb(255, 255, 255)"><span data-wiz-span="data-wiz-span" style="font-family: 微软雅黑">访问</span></span></span></div><div style="font-size: 0.75rem; line-height: 19.2px"><span style="color: rgb(85, 85, 85); font-family: Lato, &quot;Microsoft Jhenghei&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, sans-serif; font-size: 1rem; font-style: normal; font-weight: normal; text-align: justify; text-indent: 0px; display: inline !important; background-color: rgb(255, 255, 255)"><span style="color: rgb(85, 85, 85); font-family: Lato, &quot;Microsoft Jhenghei&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, sans-serif; font-size: 1rem; font-style: normal; font-weight: normal; text-align: justify; text-indent: 0px; display: inline !important; background-color: rgb(255, 255, 255)"><a href="http://192.168.127.58:8080/test/id.jsp"><span data-wiz-span="data-wiz-span" style="font-family: 微软雅黑">http://192.168.127.58:8080/test/id.jsp</span></a></span></span></div><div style="font-size: 0.75rem; line-height: 19.2px"><span style="color: rgb(85, 85, 85); font-family: Lato, &quot;Microsoft Jhenghei&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, sans-serif; font-size: 1rem; font-style: normal; font-weight: normal; text-align: justify; text-indent: 0px; display: inline !important; background-color: rgb(255, 255, 255)"><span style="color: rgb(85, 85, 85); font-family: Lato, &quot;Microsoft Jhenghei&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, sans-serif; font-size: 1rem; font-style: normal; font-weight: normal; text-align: justify; text-indent: 0px; display: inline !important; background-color: rgb(255, 255, 255)"><span data-wiz-span="data-wiz-span" style="font-family: 微软雅黑"> </span><a href="http://192.168.127.58:8081/test/id.jsp"><span data-wiz-span="data-wiz-span" style="font-family: 微软雅黑">http://192.168.127.58:8081/test/id.jsp</span></a></span></span></div><div style="font-size: 0.75rem; line-height: 19.2px"><span style="color: rgb(85, 85, 85); font-family: Lato, &quot;Microsoft Jhenghei&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, sans-serif; font-size: 1rem; font-style: normal; font-weight: normal; text-align: justify; text-indent: 0px; display: inline !important; background-color: rgb(255, 255, 255)"><span style="color: rgb(85, 85, 85); font-family: Lato, &quot;Microsoft Jhenghei&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, sans-serif; font-size: 1rem; font-style: normal; font-weight: normal; text-align: justify; text-indent: 0px; display: inline !important; background-color: rgb(255, 255, 255)"><span data-wiz-span="data-wiz-span" style="font-family: 微软雅黑"> </span><a href="http://192.168.127.58:8082/test/id.jsp"><span data-wiz-span="data-wiz-span" style="font-family: 微软雅黑">http://192.168.127.58:8082/test/id.jsp</span></a></span></span></div><div style="text-align: justify; line-height: 19.2px"><font color="#555555"><span style="background-color: rgb(255, 255, 255)"><span data-wiz-span="data-wiz-span" style="font-family: 微软雅黑">和</span></span></font></div><div style="text-align: justify; line-height: 19.2px"><font color="#555555"><span style="background-color: rgb(255, 255, 255)"><span style="color: rgb(85, 85, 85); font-family: Lato, &quot;Microsoft Jhenghei&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, sans-serif; font-size: 1rem; font-style: normal; font-weight: normal; text-align: justify; text-indent: 0px; display: inline !important; background-color: rgb(255, 255, 255)"><a href="http://192.168.127.58:8000/test/id.jsp"><span data-wiz-span="data-wiz-span" style="font-family: 微软雅黑">http://192.168.127.58:8000/test/id.jsp</span></a></span></span></font></div><div style="text-align: justify; line-height: 19.2px"><font color="#555555"><span style="background-color: rgb(255, 255, 255)"><span style="color: rgb(85, 85, 85); font-family: Lato, &quot;Microsoft Jhenghei&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, sans-serif; font-size: 1rem; font-style: normal; font-weight: normal; text-align: justify; text-indent: 0px; display: inline !important; background-color: rgb(255, 255, 255)"><span data-wiz-span="data-wiz-span" style="font-family: 微软雅黑">的结果都是一样的 session id</span></span><br></span></font></div><div style="text-align: justify; line-height: 19.2px" class="wiz-code-container" id="wiz_cm_1504686961880_1257" data-mode="XML" data-theme="default"><pre><code class="hljs javascript">response <span class="hljs-keyword">from</span> tomcat_1 
E47C459C5B9800294F408D0FFCFEFFD8

response <span class="hljs-keyword">from</span> tomcat_2
E47C459C5B9800294F408D0FFCFEFFD8

response <span class="hljs-keyword">from</span> tomcat_3
E47C459C5B9800294F408D0FFCFEFFD8</code></pre><div></div></div><div style="text-align: justify"><font color="#555555"><span style="background-color: rgb(255, 255, 255)"><span style="text-align: justify; text-indent: 0px; display: inline !important; background-color: rgb(255, 255, 255)"><span data-wiz-span="data-wiz-span"><ul style="color: rgb(85, 85, 85); font-family: Lato, &quot;Microsoft Jhenghei&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, sans-serif; font-size: 1rem; font-style: normal; font-weight: normal; line-height: 19.2px; list-style: square; text-align: justify; text-indent: 0px; background-color: rgb(255, 255, 255)"><li style="list-style: circle">使用 redis-cli 连接 redis 服务器，查看会显示有 “E47C459C5B9800294F408D0FFCFEFFD8” key的 session 数据，value为序列化数据。</li></ul><span style="line-height: 19.2px"><div style="text-align: justify"><font color="#555555"><span style="background-color: rgb(255, 255, 255)"><span style="text-align: justify; text-indent: 0px; display: inline !important; background-color: rgb(255, 255, 255)"><span data-wiz-span="data-wiz-span"><span style="line-height: 19.2px"><br></span></span></span></span></font></div>登录<span style="color: rgb(85, 85, 85); font-family: Lato, &quot;Microsoft Jhenghei&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, sans-serif; font-size: 1rem; font-style: normal; font-weight: normal; text-align: justify; text-indent: 0px; display: inline !important; background-color: rgb(255, 255, 255)">redis-cli<span class="Apple-converted-space"> </span></span><br></span><img src="assets/1551066199-1abc97bc946c61627e0e79d350787172.png" border="0" class=""><div>&nbsp;redis 查询所有的key</div><div class="wiz-code-container" id="wiz_cm_1504687389661_3303" data-mode="XML" data-theme="default"><pre><code class="hljs nginx"><span class="hljs-attribute">keys</span> *</code></pre><div></div></div><div><img src="assets/1551066199-25ca9ff24b77871ad60e062e6a816150.png" border="0" class=""><div>&nbsp;</div></div><br></span></span></span></font></div><div style="text-align: justify; line-height: 19.2px"><font color="#555555"><span style="background-color: rgb(255, 255, 255)"><span style="color: rgb(85, 85, 85); font-family: Lato, &quot;Microsoft Jhenghei&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, sans-serif; font-size: 1rem; font-style: normal; font-weight: normal; text-align: justify; text-indent: 0px; display: inline !important; background-color: rgb(255, 255, 255)"><span data-wiz-span="data-wiz-span" style="font-family: 微软雅黑"><br></span></span></span></font></div><div style="font-size: 0.75rem; line-height: 19.2px"><span style="color: rgb(85, 85, 85); font-family: Lato, &quot;Microsoft Jhenghei&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, sans-serif; font-size: 1rem; font-style: normal; font-weight: normal; text-align: justify; text-indent: 0px; display: inline !important; background-color: rgb(255, 255, 255)"><br></span></div><div style="font-size: 0.75rem; line-height: 19.2px"><br></div></div><div><div style="text-align: left"><span style="font-size: 0.75rem; line-height: 19.2px"><br></span></div></div><div><span style="font-size: 0.75rem; line-height: 19.2px"><br></span></div><div><span style="font-size: 0.75rem; line-height: 19.2px"><br></span></div><div style="line-height: 19.2px">&nbsp;</div></div></div><div><span style="line-height: 19.2px"><br></span></div><div><br></div><div><br></div><br><br><div><a title="来自为知笔记(Wiz)" href="http://www.wiz.cn/i/1322fc70">来自为知笔记(Wiz)</a></div><br><br></div>
<div class="clear"></div>
<div id="blog_post_info_block">
<div id="BlogPostCategory"></div>
<div id="EntryTag">标签: <a href="https://www.cnblogs.com/redcoatjk/tag/%E4%BE%8B%E5%AD%90/">例子</a>, <a href="https://www.cnblogs.com/redcoatjk/tag/%E6%80%BB%E7%BB%93/">总结</a></div>
<div id="blog_post_info"><div id="green_channel">
        <a href="javascript:void(0);" id="green_channel_digg" onclick="DiggIt(6279225,cb_blogId,1);green_channel_success(this,'谢谢推荐！');">好文要顶</a>
            <a id="green_channel_follow" onclick="follow('e858feca-d961-e111-aa3f-842b2b196315');" href="javascript:void(0);">关注我</a>
    <a id="green_channel_favorite" onclick="AddToWz(cb_entryId);return false;" href="javascript:void(0);">收藏该文</a>
    <a id="green_channel_weibo" href="javascript:void(0);" title="分享至新浪微博" onclick="ShareToTsina()"><img src="assets/1551066199-3212f7b914cc9773fb30bbf4656405fc.png" alt=""></a>
    <a id="green_channel_wechat" href="javascript:void(0);" title="分享至微信" onclick="shareOnWechat()"><img src="assets/1551066199-cb7153d1c13a5d9aef10ebab342f6f71.png" alt=""></a>
</div>
<div id="author_profile">
    <div id="author_profile_info" class="author_profile_info">
            <a href="http://home.cnblogs.com/u/redcoatjk/" target="_blank"><img src="assets/1551066199-afe3f0541e8bfc319c08b441dfad7b90.gif" class="author_avatar" alt=""></a>
        <div id="author_profile_detail" class="author_profile_info">
            <a href="http://home.cnblogs.com/u/redcoatjk/">redcoatjk</a><br>
            <a href="http://home.cnblogs.com/u/redcoatjk/followees">关注 - 1</a><br>
            <a href="http://home.cnblogs.com/u/redcoatjk/followers">粉丝 - 6</a>
        </div>
    </div>
    <div class="clear"></div>
    <div id="author_profile_honor"></div>
    <div id="author_profile_follow">
                <a href="javascript:void(0);" onclick="follow('e858feca-d961-e111-aa3f-842b2b196315');return false;">+加关注</a>
    </div>
</div>
<div id="div_digg">
    <div class="diggit" onclick="votePost(6279225,'Digg')">
        <span class="diggnum" id="digg_count">0</span>
    </div>
    <div class="buryit" onclick="votePost(6279225,'Bury')">
        <span class="burynum" id="bury_count">0</span>
    </div>
    <div class="clear"></div>
    <div class="diggword" id="digg_tips">
    </div>
</div>
</div>
<div class="clear"></div>
<div id="post_next_prev"><a href="https://www.cnblogs.com/redcoatjk/p/6118300.html" class="p_n_p_prefix">« </a> 上一篇：<a href="https://www.cnblogs.com/redcoatjk/p/6118300.html" title="发布于2016-11-30 16:19">Spring以及SPringmvc相关问题: ServletContext -父子容器</a><br><a href="https://www.cnblogs.com/redcoatjk/p/7422823.html" class="p_n_p_prefix">» </a> 下一篇：<a href="https://www.cnblogs.com/redcoatjk/p/7422823.html" title="发布于2017-08-24 14:19">[总结] Synchronized汇总</a><br></div>
</div>
  
  </body>
</html>